version: '3'
services:
  web:
    image: ruby:latest
    restart: unless-stopped
    network_mode: "host"
    command:
      - bash
      - -c
      - >
        git clone https://github.com/unRARed/pokerb.git;
        cd pokerb;
        git pull;
        bundle install;
        rackup -o 0.0.0.0 -p 5000
    ports:
      - 0.0.0.0:5000:5000
    volumes:
      - container_storage:/pokerb
    environment:
      - DEBUG=1
      - POKERB_HOSTNAME=some.domain.com
volumes:
    container_storage:
